{"conceptual":"\n<p sourcefile=\"server/deleting-streams-and-events.md\" sourcestartlinenumber=\"3\" sourceendlinenumber=\"3\">Meta data in Event Store defines whether an event is deleted or not. Stream metadata such as &quot;Truncate Before&quot;, &quot;Max Age&quot; and &quot;Max Count&quot; is used to filter out events considered deleted. When reading a stream, the index will check the stream&#39;s metadata to determine whether any of its events have been deleted.</p>\n<p sourcefile=\"server/deleting-streams-and-events.md\" sourcestartlinenumber=\"5\" sourceendlinenumber=\"5\"><code>$all</code> bypasses the index, meaning that it does not check the metadata to determine whether events exist or not. As such, events that have been deleted will still be readable until a scavenge has removed them. There are a number of requirements for a scavenge to successfully remove events, for more information about this, please see the section on <a href=\"~/server/scavenging.md\" data-raw-source=\"[Scavenging](scavenging.md)\" sourcefile=\"server/deleting-streams-and-events.md\" sourcestartlinenumber=\"5\" sourceendlinenumber=\"5\">Scavenging</a>.</p>\n<div class=\"WARNING\" sourcefile=\"server/deleting-streams-and-events.md\" sourcestartlinenumber=\"7\" sourceendlinenumber=\"7\"><h5>Warning</h5><p sourcefile=\"server/deleting-streams-and-events.md\" sourcestartlinenumber=\"8\" sourceendlinenumber=\"8\">The last event in a stream is always kept as a record of the last event number in the stream.</p>\n</div>\n<h3 id=\"soft-delete-and-truncate-before\" sourcefile=\"server/deleting-streams-and-events.md\" sourcestartlinenumber=\"10\" sourceendlinenumber=\"10\">Soft delete and Truncate before</h3>\n<p sourcefile=\"server/deleting-streams-and-events.md\" sourcestartlinenumber=\"12\" sourceendlinenumber=\"13\"><strong>Truncate before</strong> (<code>$tb</code>) considers any event with an event number equal to or lower than its value to be deleted.\nFor example, if you had the following events in a stream :</p>\n<pre sourcefile=\"server/deleting-streams-and-events.md\" sourcestartlinenumber=\"15\" sourceendlinenumber=\"20\"><code class=\"lang-text\">0@test-stream\n1@test-stream\n2@test-stream\n3@test-stream\n</code></pre><p sourcefile=\"server/deleting-streams-and-events.md\" sourcestartlinenumber=\"22\" sourceendlinenumber=\"22\">If you set the truncate before value to 2, a read of the stream would result in only the last event being read :</p>\n<pre sourcefile=\"server/deleting-streams-and-events.md\" sourcestartlinenumber=\"24\" sourceendlinenumber=\"26\"><code class=\"lang-text\">3@test-stream\n</code></pre><p sourcefile=\"server/deleting-streams-and-events.md\" sourcestartlinenumber=\"28\" sourceendlinenumber=\"29\"><strong>Soft delete</strong> makes use of Truncate before. When a stream is deleted, its Truncate before is set to the streams current last event number. When a soft deleted stream is read, the read will return a <code>StreamNotFound</code> or <code>404</code> result.\nAfter deleting the stream, you are able to write to it again, continuing from where it left off.</p>\n<p sourcefile=\"server/deleting-streams-and-events.md\" sourcestartlinenumber=\"31\" sourceendlinenumber=\"31\">For example, if you soft deleted the above example stream, the truncate before would be set to 3 (the stream&#39;s current event number). If you were to write to the stream again, the next event would be written with event number 4. Only events from event number 4 onwards would be visible when reading this stream.</p>\n<h3 id=\"max-count-and-max-age\" sourcefile=\"server/deleting-streams-and-events.md\" sourcestartlinenumber=\"33\" sourceendlinenumber=\"33\">Max count and Max age</h3>\n<p sourcefile=\"server/deleting-streams-and-events.md\" sourcestartlinenumber=\"35\" sourceendlinenumber=\"36\"><strong>Max count</strong> (<code>$maxCount</code>) limits the number of events that can be read from a stream.\nIf you try to read a stream that has a max count of 5, you will only be able to read the last 5 events regardless of how many events are actually in the stream.</p>\n<p sourcefile=\"server/deleting-streams-and-events.md\" sourcestartlinenumber=\"38\" sourceendlinenumber=\"39\"><strong>Max age</strong> (<code>$maxAge</code>) specifies the number of seconds an event can live for.\nThis age is calculated at the time of the read, so if you read a stream with a Max Age of 3 minutes and one of the events in the stream has existed for 4 minutes at the time of the read, it will not be returned.</p>\n<h2 id=\"hard-delete\" sourcefile=\"server/deleting-streams-and-events.md\" sourcestartlinenumber=\"41\" sourceendlinenumber=\"41\">Hard delete</h2>\n<p sourcefile=\"server/deleting-streams-and-events.md\" sourcestartlinenumber=\"43\" sourceendlinenumber=\"45\">A <strong>hard delete</strong> writes a tombstone event to the stream, permanently deleting it. The stream cannot be recreated or written to again.\nTombstone events are written with the event type <code>$streamDeleted</code>.\nWhen a hard deleted stream is read, the read will return a <code>StreamDeleted</code> or <code>410</code> result.</p>\n<p sourcefile=\"server/deleting-streams-and-events.md\" sourcestartlinenumber=\"47\" sourceendlinenumber=\"47\">The events in the deleted stream are liable to be removed in a scavenge, but the tombstone event will remain.</p>\n<div class=\"WARNING\" sourcefile=\"server/deleting-streams-and-events.md\" sourcestartlinenumber=\"49\" sourceendlinenumber=\"49\"><h5>Warning</h5><p sourcefile=\"server/deleting-streams-and-events.md\" sourcestartlinenumber=\"50\" sourceendlinenumber=\"50\">A hard delete of a stream is permanent. The stream cannot be written to or recreated. As such, you should generally prefer to soft delete streams unless you have a specific need to permanently delete the stream.</p>\n</div>\n<h2 id=\"deleted-events-and-projections\" sourcefile=\"server/deleting-streams-and-events.md\" sourcestartlinenumber=\"52\" sourceendlinenumber=\"52\">Deleted events and projections</h2>\n<p sourcefile=\"server/deleting-streams-and-events.md\" sourcestartlinenumber=\"54\" sourceendlinenumber=\"54\">If you are intending on using projections and deleting streams, there are some things to take into consideration:</p>\n<p sourcefile=\"server/deleting-streams-and-events.md\" sourcestartlinenumber=\"56\" sourceendlinenumber=\"56\">Due to the nature of $all, projections using <code>fromAll</code> will read any deleted events that have not been scavenged away. They will also receive any tombstone events from hard deletes.</p>\n<p sourcefile=\"server/deleting-streams-and-events.md\" sourcestartlinenumber=\"58\" sourceendlinenumber=\"58\">Projections that read from a specific stream will also receive that stream&#39;s metadata events. These can be filtered out by ignoring events with an event type <code>$metadata</code>.</p>\n","type":"Conceptual","source":{"remote":{"path":"server/deleting-streams-and-events.md","branch":"swagger-docfx","repo":"git@github.com:EventStore/docs.geteventstore.com.git"},"startLine":0,"endLine":0,"isExternal":false},"path":"server/deleting-streams-and-events.md","documentation":{"remote":{"path":"server/deleting-streams-and-events.md","branch":"swagger-docfx","repo":"git@github.com:EventStore/docs.geteventstore.com.git"},"startLine":0,"endLine":0,"isExternal":false},"_docfxVersion":"2.31.0.0","_systemKeys":["conceptual","type","source","path","documentation","title","rawTitle","wordCount"],"title":"Deleting streams and events","rawTitle":"<h1 id=\"deleting-streams-and-events\" sourcefile=\"server/deleting-streams-and-events.md\" sourcestartlinenumber=\"1\" sourceendlinenumber=\"1\">Deleting streams and events</h1>","wordCount":613,"_lang":"csharp","_tocPath":"docs/toc.html","_rel":"../../","_path":"docs/server/deleting-streams-and-events.html","_key":"server/deleting-streams-and-events.md","_tocRel":"../toc.html","_tocKey":"~/toc.md","__global":{"classesInSubtitle":"Classes","structsInSubtitle":"Structs","interfacesInSubtitle":"Interfaces","enumsInSubtitle":"Enums","delegatesInSubtitle":"Delegates","constructorsInSubtitle":"Constructors","fieldsInSubtitle":"Fields","propertiesInSubtitle":"Properties","methodsInSubtitle":"Methods","eventsInSubtitle":"Events","operatorsInSubtitle":"Operators","eiisInSubtitle":"Explicit Interface Implementations","functionsInSubtitle":"Functions","membersInSubtitle":"Members","improveThisDoc":"Improve this Doc","viewSource":"View Source","inheritance":"Inheritance","inheritedMembers":"Inherited Members","namespace":"Namespace","assembly":"Assembly","syntax":"Syntax","overrides":"Overrides","implements":"Implements","remarks":"Remarks","examples":"Examples","seealso":"See Also","declaration":"Declaration","parameters":"Parameters","typeParameters":"Type Parameters","type":"Type","name":"Name","description":"Description","returns":"Returns","fieldValue":"Field Value","propertyValue":"Property Value","eventType":"Event Type","exceptions":"Exceptions","condition":"Condition","extensionMethods":"Extension Methods","note":"<h5>Note</h5>","warning":"<h5>Warning</h5>","tip":"<h5>Tip</h5>","important":"<h5>Important</h5>","caution":"<h5>Caution</h5>","_shared":{}}}