{"conceptual":"\n<h1 id=\"stream-metadata\" sourcefile=\"http-api/read-stream-metadata.md\" sourcestartlinenumber=\"4\" sourceendlinenumber=\"4\">Stream Metadata</h1>\n<!--  TODO: Break up to write / read? And maybe transclude-->\n<p sourcefile=\"http-api/read-stream-metadata.md\" sourcestartlinenumber=\"8\" sourceendlinenumber=\"8\">Every stream in Event Store has metadata associated with it. Internally, the metadata includes information such as the ACL of the stream and the maximum count and age for the events in the stream. Client code can also add information into stream metadata for use with projections or the client API.</p>\n<p sourcefile=\"http-api/read-stream-metadata.md\" sourcestartlinenumber=\"10\" sourceendlinenumber=\"10\">A common use case for information you may want to store in metadata is information associated with an event that is not part of the event.</p>\n<p sourcefile=\"http-api/read-stream-metadata.md\" sourcestartlinenumber=\"12\" sourceendlinenumber=\"12\">Examples of this might be:</p>\n<ul sourcefile=\"http-api/read-stream-metadata.md\" sourcestartlinenumber=\"14\" sourceendlinenumber=\"16\">\n<li sourcefile=\"http-api/read-stream-metadata.md\" sourcestartlinenumber=\"14\" sourceendlinenumber=\"14\">Which user wrote the event.</li>\n<li sourcefile=\"http-api/read-stream-metadata.md\" sourcestartlinenumber=\"15\" sourceendlinenumber=\"15\">Which application server were they talking to.</li>\n<li sourcefile=\"http-api/read-stream-metadata.md\" sourcestartlinenumber=\"16\" sourceendlinenumber=\"16\">What IP address did the request come from?</li>\n</ul>\n<p sourcefile=\"http-api/read-stream-metadata.md\" sourcestartlinenumber=\"18\" sourceendlinenumber=\"18\">Stream metadata is stored internally as JSON, and you can access it over the HTTP APIs.</p>\n<h2 id=\"reading-stream-metadata\" sourcefile=\"http-api/read-stream-metadata.md\" sourcestartlinenumber=\"20\" sourceendlinenumber=\"20\">Reading Stream Metadata</h2>\n<p sourcefile=\"http-api/read-stream-metadata.md\" sourcestartlinenumber=\"22\" sourceendlinenumber=\"22\">To read the metadata, issue a <code>GET</code> request to the attached metadata resource, which is of the form:</p>\n<pre sourcefile=\"http-api/read-stream-metadata.md\" sourcestartlinenumber=\"24\" sourceendlinenumber=\"26\"><code class=\"lang-http\">http://{eventstore}/streams/{stream-name}/metadata\n</code></pre><p sourcefile=\"http-api/read-stream-metadata.md\" sourcestartlinenumber=\"28\" sourceendlinenumber=\"28\">You should not access metadata by constructing this URL yourself, as the right to change the resource address is reserved. Instead, you should follow the link for from the stream itself, which will enable your client to tolerate future changes to the addressing structure without breaking.</p>\n<div class=\"tabGroup\" id=\"tabgroup_1+uUutSRbb\" sourcefile=\"http-api/read-stream-metadata.md\" sourcestartlinenumber=\"30\" sourceendlinenumber=\"83\">\n<ul role=\"tablist\">\n<li role=\"presentation\">\n<a href=\"#tabpanel_1+uUutSRbb_tabid-1\" role=\"tab\" aria-controls=\"tabpanel_1+uUutSRbb_tabid-1\" data-tab=\"tabid-1\" tabindex=\"0\" aria-selected=\"true\" sourcefile=\"http-api/read-stream-metadata.md\" sourcestartlinenumber=\"30\" sourceendlinenumber=\"30\">Request</a>\n</li>\n<li role=\"presentation\">\n<a href=\"#tabpanel_1+uUutSRbb_tabid-2\" role=\"tab\" aria-controls=\"tabpanel_1+uUutSRbb_tabid-2\" data-tab=\"tabid-2\" tabindex=\"-1\" sourcefile=\"http-api/read-stream-metadata.md\" sourcestartlinenumber=\"36\" sourceendlinenumber=\"36\">Response</a>\n</li>\n</ul>\n<section id=\"tabpanel_1+uUutSRbb_tabid-1\" role=\"tabpanel\" data-tab=\"tabid-1\">\n<pre sourcefile=\"http-api/read-stream-metadata.md\" sourcestartlinenumber=\"32\" sourceendlinenumber=\"34\"><code class=\"lang-bash\">curl -i http://127.0.0.1:2113/streams/$users --user admin:changeit\n</code></pre></section>\n<section id=\"tabpanel_1+uUutSRbb_tabid-2\" role=\"tabpanel\" data-tab=\"tabid-2\" aria-hidden=\"true\" hidden=\"hidden\">\n<pre sourcefile=\"http-api/read-stream-metadata.md\" sourcestartlinenumber=\"38\" sourceendlinenumber=\"81\"><code class=\"lang-http\">HTTP/1.1 200 OK\nCache-Control: max-age=0, no-cache, must-revalidate\nContent-Length: 1267\nContent-Type: application/vnd.eventstore.atom+json; charset: utf-8\nETag: &quot;0;-2060438500&quot;\nVary: Accept\nServer: Microsoft-HTTPAPI/2.0\nAccess-Control-Allow-Methods: POST, DELETE, GET, OPTIONS\nAccess-Control-Allow-Headers: Content-Type, X-Requested-With, X-PINGOTHER\nAccess-Control-Allow-Origin: *\nDate: Sun, 16 Jun 2013 15:08:49 GMT\n\n{\n  &quot;title&quot;: &quot;Event stream &#39;$users&#39;&quot;,\n  &quot;id&quot;: &quot;&lt;http://127.0.0.1:2113/streams/%24users&quot;&gt;,\n  &quot;updated&quot;: &quot;2013-06-16T15:08:47.5245306Z&quot;,\n  &quot;author&quot;: {\n    &quot;name&quot;: &quot;EventStore&quot;\n  },\n  &quot;links&quot;: [\n    {\n      &quot;uri&quot;: &quot;http://127.0.0.1:2113/streams/%24users&quot;,\n      &quot;relation&quot;: &quot;self&quot;\n    },\n    {\n      &quot;uri&quot;: &quot;http://127.0.0.1:2113/streams/%24users/head/backward/20&quot;,\n      &quot;relation&quot;: &quot;first&quot;\n    },\n    {\n      &quot;uri&quot;: &quot;http://127.0.0.1:2113/streams/%24users/0/forward/20&quot;,\n      &quot;relation&quot;: &quot;last&quot;\n    },\n    {\n      &quot;uri&quot;: &quot;http://127.0.0.1:2113/streams/%24users/1/forward/20&quot;,\n      &quot;relation&quot;: &quot;previous&quot;\n    },\n    {\n      &quot;uri&quot;: &quot;http://127.0.0.1:2113/streams/%24users/metadata&quot;,\n      &quot;relation&quot;: &quot;metadata&quot;\n    }\n  ],\n...\n</code></pre></section>\n</div>\n<p sourcefile=\"http-api/read-stream-metadata.md\" sourcestartlinenumber=\"85\" sourceendlinenumber=\"85\">Once you have the URI of the metadata stream, a <code>GET</code> request will retrieve the metadata:</p>\n<div class=\"tabGroup\" id=\"tabgroup_1+uUutSRbb-1\" sourcefile=\"http-api/read-stream-metadata.md\" sourcestartlinenumber=\"87\" sourceendlinenumber=\"138\">\n<ul role=\"tablist\">\n<li role=\"presentation\">\n<a href=\"#tabpanel_1+uUutSRbb-1_tabid-3\" role=\"tab\" aria-controls=\"tabpanel_1+uUutSRbb-1_tabid-3\" data-tab=\"tabid-3\" tabindex=\"0\" aria-selected=\"true\" sourcefile=\"http-api/read-stream-metadata.md\" sourcestartlinenumber=\"87\" sourceendlinenumber=\"87\">Request</a>\n</li>\n<li role=\"presentation\">\n<a href=\"#tabpanel_1+uUutSRbb-1_tabid-4\" role=\"tab\" aria-controls=\"tabpanel_1+uUutSRbb-1_tabid-4\" data-tab=\"tabid-4\" tabindex=\"-1\" sourcefile=\"http-api/read-stream-metadata.md\" sourcestartlinenumber=\"93\" sourceendlinenumber=\"93\">Response</a>\n</li>\n</ul>\n<section id=\"tabpanel_1+uUutSRbb-1_tabid-3\" role=\"tabpanel\" data-tab=\"tabid-3\">\n<pre sourcefile=\"http-api/read-stream-metadata.md\" sourcestartlinenumber=\"89\" sourceendlinenumber=\"91\"><code class=\"lang-bash\">curl -i http://127.0.0.1:2113/streams/$users/metadata --user admin:changeit\n</code></pre></section>\n<section id=\"tabpanel_1+uUutSRbb-1_tabid-4\" role=\"tabpanel\" data-tab=\"tabid-4\" aria-hidden=\"true\" hidden=\"hidden\">\n<pre sourcefile=\"http-api/read-stream-metadata.md\" sourcestartlinenumber=\"95\" sourceendlinenumber=\"136\"><code class=\"lang-http\">HTTP/1.1 200 OK\nCache-Control: max-age=31536000, public\nContent-Length: 652\nContent-Type: application/vnd.eventstore.atom+json; charset: utf-8\nVary: Accept\nServer: Microsoft-HTTPAPI/2.0\nAccess-Control-Allow-Methods: GET, POST, GET, OPTIONS\nAccess-Control-Allow-Headers: Content-Type, X-Requested-With, X-PINGOTHER\nAccess-Control-Allow-Origin: *\nDate: Sun, 16 Jun 2013 13:18:29 GMT\n\n{\n  &quot;title&quot;: &quot;0@$$$users&quot;,\n  &quot;id&quot;: &quot;&lt;http://127.0.0.1:2113/streams/%24%24%24users/0&quot;&gt;,\n  &quot;updated&quot;: &quot;2013-06-16T12:25:13.8428624Z&quot;,\n  &quot;author&quot;: {\n    &quot;name&quot;: &quot;EventStore&quot;\n  },\n  &quot;summary&quot;: &quot;$metadata&quot;,\n  &quot;content&quot;: {\n    &quot;eventStreamId&quot;: &quot;$$$users&quot;,\n    &quot;eventNumber&quot;: 0,\n    &quot;eventType&quot;: &quot;$metadata&quot;,\n    &quot;data&quot;: {\n      &quot;readRole&quot;: &quot;$all&quot;,\n      &quot;metaReadRole&quot;: &quot;$all&quot;\n    },\n    &quot;metadata&quot;: &quot;&quot;\n  },\n  &quot;links&quot;: [\n    {\n      &quot;uri&quot;: &quot;http://127.0.0.1:2113/streams/%24%24%24users/0&quot;,\n      &quot;relation&quot;: &quot;edit&quot;\n    },\n    {\n      &quot;uri&quot;: &quot;http://127.0.0.1:2113/streams/%24%24%24users/0&quot;,\n      &quot;relation&quot;: &quot;alternate&quot;\n    }\n  ]\n}\n</code></pre></section>\n</div>\n<p sourcefile=\"http-api/read-stream-metadata.md\" sourcestartlinenumber=\"140\" sourceendlinenumber=\"140\">Reading metadata may require that you pass credentials if you have security enabled, as in the examples above. If you do not pass credentials and they are required you will receive a &#39;401 Unauthorized&#39; response.</p>\n<div class=\"tabGroup\" id=\"tabgroup_1+uUutSRbb-2\" sourcefile=\"http-api/read-stream-metadata.md\" sourcestartlinenumber=\"142\" sourceendlinenumber=\"162\">\n<ul role=\"tablist\">\n<li role=\"presentation\">\n<a href=\"#tabpanel_1+uUutSRbb-2_tabid-5\" role=\"tab\" aria-controls=\"tabpanel_1+uUutSRbb-2_tabid-5\" data-tab=\"tabid-5\" tabindex=\"0\" aria-selected=\"true\" sourcefile=\"http-api/read-stream-metadata.md\" sourcestartlinenumber=\"142\" sourceendlinenumber=\"142\">Request</a>\n</li>\n<li role=\"presentation\">\n<a href=\"#tabpanel_1+uUutSRbb-2_tabid-6\" role=\"tab\" aria-controls=\"tabpanel_1+uUutSRbb-2_tabid-6\" data-tab=\"tabid-6\" tabindex=\"-1\" sourcefile=\"http-api/read-stream-metadata.md\" sourcestartlinenumber=\"148\" sourceendlinenumber=\"148\">Response</a>\n</li>\n</ul>\n<section id=\"tabpanel_1+uUutSRbb-2_tabid-5\" role=\"tabpanel\" data-tab=\"tabid-5\">\n<pre sourcefile=\"http-api/read-stream-metadata.md\" sourcestartlinenumber=\"144\" sourceendlinenumber=\"146\"><code class=\"lang-bash\">curl -i http://127.0.0.1:2113/streams/$users/metadata\n</code></pre></section>\n<section id=\"tabpanel_1+uUutSRbb-2_tabid-6\" role=\"tabpanel\" data-tab=\"tabid-6\" aria-hidden=\"true\" hidden=\"hidden\">\n<pre sourcefile=\"http-api/read-stream-metadata.md\" sourcestartlinenumber=\"150\" sourceendlinenumber=\"160\"><code class=\"lang-http\">HTTP/1.1 401 Unauthorized\nContent-Length: 0\nContent-Type: text/plain; charset: utf-8\nServer: Microsoft-HTTPAPI/2.0\nAccess-Control-Allow-Methods: GET, POST, GET, OPTIONS\nAccess-Control-Allow-Headers: Content-Type, X-Requested-With, X-PINGOTHER\nAccess-Control-Allow-Origin: *\nWWW-Authenticate: Basic realm=&quot;ES&quot;\nDate: Sun, 16 Jun 2013 13:20:22 GMT\n</code></pre></section>\n</div>\n<h1 id=\"stream-metadata\" sourcefile=\"http-api/update-stream-metadata.md\" sourcestartlinenumber=\"4\" sourceendlinenumber=\"4\">Stream Metadata</h1>\n<!--  TODO: Break up to write / read? And maybe transclude-->\n<h2 id=\"writing-metadata\" sourcefile=\"http-api/update-stream-metadata.md\" sourcestartlinenumber=\"8\" sourceendlinenumber=\"8\">Writing Metadata</h2>\n<p sourcefile=\"http-api/update-stream-metadata.md\" sourcestartlinenumber=\"10\" sourceendlinenumber=\"10\">To update the metadata for a stream, issue a <code>POST</code> request to the metadata resource. This will replace the current metadata with the information posted.</p>\n<p sourcefile=\"http-api/update-stream-metadata.md\" sourcestartlinenumber=\"12\" sourceendlinenumber=\"12\">Inside a file named <em>metadata.txt</em>:</p>\n<pre sourcefile=\"http-api/update-stream-metadata.md\" sourcestartlinenumber=\"14\" sourceendlinenumber=\"25\"><code class=\"lang-json\">[\n    {\n        &quot;eventId&quot;: &quot;7c314750-05e1-439f-b2eb-f5b0e019be72&quot;,\n        &quot;eventType&quot;: &quot;$user-updated&quot;,\n        &quot;data&quot;: {\n            &quot;readRole&quot;: &quot;$all&quot;,\n            &quot;metaReadRole&quot;: &quot;$all&quot;\n        }\n    }\n]\n</code></pre><p sourcefile=\"http-api/update-stream-metadata.md\" sourcestartlinenumber=\"27\" sourceendlinenumber=\"27\">You can also add user-specified metadata here. Some examples of good uses of user-specified metadata:</p>\n<ul sourcefile=\"http-api/update-stream-metadata.md\" sourcestartlinenumber=\"29\" sourceendlinenumber=\"31\">\n<li sourcefile=\"http-api/update-stream-metadata.md\" sourcestartlinenumber=\"29\" sourceendlinenumber=\"29\">which adapter is responsible for populating a stream.</li>\n<li sourcefile=\"http-api/update-stream-metadata.md\" sourcestartlinenumber=\"30\" sourceendlinenumber=\"30\">which projection caused a stream to be created.</li>\n<li sourcefile=\"http-api/update-stream-metadata.md\" sourcestartlinenumber=\"31\" sourceendlinenumber=\"31\">a correlation ID of some business process.</li>\n</ul>\n<p sourcefile=\"http-api/update-stream-metadata.md\" sourcestartlinenumber=\"33\" sourceendlinenumber=\"33\">This information is then posted to the stream:</p>\n<div class=\"tabGroup\" id=\"tabgroup_vOpnT1zokb\" sourcefile=\"http-api/update-stream-metadata.md\" sourcestartlinenumber=\"35\" sourceendlinenumber=\"55\">\n<ul role=\"tablist\">\n<li role=\"presentation\">\n<a href=\"#tabpanel_vOpnT1zokb_tabid-7\" role=\"tab\" aria-controls=\"tabpanel_vOpnT1zokb_tabid-7\" data-tab=\"tabid-7\" tabindex=\"0\" aria-selected=\"true\" sourcefile=\"http-api/update-stream-metadata.md\" sourcestartlinenumber=\"35\" sourceendlinenumber=\"35\">Request</a>\n</li>\n<li role=\"presentation\">\n<a href=\"#tabpanel_vOpnT1zokb_tabid-8\" role=\"tab\" aria-controls=\"tabpanel_vOpnT1zokb_tabid-8\" data-tab=\"tabid-8\" tabindex=\"-1\" sourcefile=\"http-api/update-stream-metadata.md\" sourcestartlinenumber=\"41\" sourceendlinenumber=\"41\">Response</a>\n</li>\n</ul>\n<section id=\"tabpanel_vOpnT1zokb_tabid-7\" role=\"tabpanel\" data-tab=\"tabid-7\">\n<pre sourcefile=\"http-api/update-stream-metadata.md\" sourcestartlinenumber=\"37\" sourceendlinenumber=\"39\"><code class=\"lang-bash\">curl -i -d @metadata.txt http://127.0.0.1:2113/streams/$users/metadata --user admin:changeit -H &quot;Content-Type: application/vnd.eventstore.events+json&quot;\n</code></pre></section>\n<section id=\"tabpanel_vOpnT1zokb_tabid-8\" role=\"tabpanel\" data-tab=\"tabid-8\" aria-hidden=\"true\" hidden=\"hidden\">\n<pre sourcefile=\"http-api/update-stream-metadata.md\" sourcestartlinenumber=\"43\" sourceendlinenumber=\"53\"><code class=\"lang-http\">HTTP/1.1 201 Created\nContent-Length: 0\nContent-Type: text/plain; charset: utf-8\nLocation: http://127.0.0.1:2113/streams/%24%24%24users/1\nServer: Microsoft-HTTPAPI/2.0\nAccess-Control-Allow-Methods: GET, POST, GET, OPTIONS\nAccess-Control-Allow-Headers: Content-Type, X-Requested-With, X-PINGOTHER\nAccess-Control-Allow-Origin: *\nDate: Sun, 16 Jun 2013 14:50:21 GMT\n</code></pre></section>\n</div>\n<p sourcefile=\"http-api/update-stream-metadata.md\" sourcestartlinenumber=\"57\" sourceendlinenumber=\"57\">If the specified user does not have permissions to write to the stream metadata, you will receive a &#39;401 Unauthorized&#39; response:</p>\n<div class=\"tabGroup\" id=\"tabgroup_vOpnT1zokb-1\" sourcefile=\"http-api/update-stream-metadata.md\" sourcestartlinenumber=\"59\" sourceendlinenumber=\"78\">\n<ul role=\"tablist\">\n<li role=\"presentation\">\n<a href=\"#tabpanel_vOpnT1zokb-1_tabid-9\" role=\"tab\" aria-controls=\"tabpanel_vOpnT1zokb-1_tabid-9\" data-tab=\"tabid-9\" tabindex=\"0\" aria-selected=\"true\" sourcefile=\"http-api/update-stream-metadata.md\" sourcestartlinenumber=\"59\" sourceendlinenumber=\"59\">Request</a>\n</li>\n<li role=\"presentation\">\n<a href=\"#tabpanel_vOpnT1zokb-1_tabid-10\" role=\"tab\" aria-controls=\"tabpanel_vOpnT1zokb-1_tabid-10\" data-tab=\"tabid-10\" tabindex=\"-1\" sourcefile=\"http-api/update-stream-metadata.md\" sourcestartlinenumber=\"65\" sourceendlinenumber=\"65\">Response</a>\n</li>\n</ul>\n<section id=\"tabpanel_vOpnT1zokb-1_tabid-9\" role=\"tabpanel\" data-tab=\"tabid-9\">\n<pre sourcefile=\"http-api/update-stream-metadata.md\" sourcestartlinenumber=\"61\" sourceendlinenumber=\"63\"><code class=\"lang-bash\">curl -i -d @metadata.txt http://127.0.0.1:2113/streams/$users/metadata --user invaliduser:invalidpass -H &quot;Content-Type: application/vnd.eventstore.events+json&quot;\n</code></pre></section>\n<section id=\"tabpanel_vOpnT1zokb-1_tabid-10\" role=\"tabpanel\" data-tab=\"tabid-10\" aria-hidden=\"true\" hidden=\"hidden\">\n<pre sourcefile=\"http-api/update-stream-metadata.md\" sourcestartlinenumber=\"67\" sourceendlinenumber=\"76\"><code class=\"lang-http\">HTTP/1.1 401 Unauthorized\nContent-Length: 0\nServer: Microsoft-HTTPAPI/2.0\nAccess-Control-Allow-Methods:\nAccess-Control-Allow-Headers: Content-Type, X-Requested-With, X-PINGOTHER\nAccess-Control-Allow-Origin: *\nWWW-Authenticate: Basic realm=&quot;ES&quot;\nDate: Sun, 16 Jun 2013 14:51:37 GMT\n</code></pre></section>\n</div>\n","type":"Conceptual","source":{"remote":{"path":"http-api/stream-metadata.md","branch":"swagger-docfx","repo":"git@github.com:EventStore/docs.geteventstore.com.git"},"startLine":0,"endLine":0,"isExternal":false},"path":"http-api/stream-metadata.md","documentation":{"remote":{"path":"http-api/stream-metadata.md","branch":"swagger-docfx","repo":"git@github.com:EventStore/docs.geteventstore.com.git"},"startLine":0,"endLine":0,"isExternal":false},"_docfxVersion":"2.31.0.0","_systemKeys":["conceptual","type","source","path","documentation","title","rawTitle","wordCount"],"title":"Stream Metadata","rawTitle":"<h1 id=\"stream-metadata\" sourcefile=\"http-api/stream-metadata.md\" sourcestartlinenumber=\"1\" sourceendlinenumber=\"1\">Stream Metadata</h1>","wordCount":667,"_lang":"csharp","_tocPath":"docs/toc.html","_rel":"../../","_path":"docs/http-api/stream-metadata.html","_key":"http-api/stream-metadata.md","_tocRel":"../toc.html","_tocKey":"~/toc.md","__global":{"classesInSubtitle":"Classes","structsInSubtitle":"Structs","interfacesInSubtitle":"Interfaces","enumsInSubtitle":"Enums","delegatesInSubtitle":"Delegates","constructorsInSubtitle":"Constructors","fieldsInSubtitle":"Fields","propertiesInSubtitle":"Properties","methodsInSubtitle":"Methods","eventsInSubtitle":"Events","operatorsInSubtitle":"Operators","eiisInSubtitle":"Explicit Interface Implementations","functionsInSubtitle":"Functions","membersInSubtitle":"Members","improveThisDoc":"Improve this Doc","viewSource":"View Source","inheritance":"Inheritance","inheritedMembers":"Inherited Members","namespace":"Namespace","assembly":"Assembly","syntax":"Syntax","overrides":"Overrides","implements":"Implements","remarks":"Remarks","examples":"Examples","seealso":"See Also","declaration":"Declaration","parameters":"Parameters","typeParameters":"Type Parameters","type":"Type","name":"Name","description":"Description","returns":"Returns","fieldValue":"Field Value","propertyValue":"Property Value","eventType":"Event Type","exceptions":"Exceptions","condition":"Condition","extensionMethods":"Extension Methods","note":"<h5>Note</h5>","warning":"<h5>Warning</h5>","tip":"<h5>Tip</h5>","important":"<h5>Important</h5>","caution":"<h5>Caution</h5>","_shared":{}}}