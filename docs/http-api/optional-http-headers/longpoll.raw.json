{"conceptual":"\n<p sourcefile=\"http-api/optional-http-headers/longpoll.md\" sourcestartlinenumber=\"3\" sourceendlinenumber=\"3\">You use the <code>ES-LongPoll</code> header to instruct the server that when on the head link of a stream and no data is available the server should wait a period of time to see if data becomes available.</p>\n<div class=\"WARNING\" sourcefile=\"http-api/optional-http-headers/longpoll.md\" sourcestartlinenumber=\"5\" sourceendlinenumber=\"5\"><h5>Warning</h5><p sourcefile=\"http-api/optional-http-headers/longpoll.md\" sourcestartlinenumber=\"6\" sourceendlinenumber=\"6\">Version 2.1 and higher support the <code>ES-LongPoll</code> header. Lower versions will ignore the header.</p>\n<!-- TODO: version 2.1 of what? -->\n</div>\n<p sourcefile=\"http-api/optional-http-headers/longpoll.md\" sourcestartlinenumber=\"9\" sourceendlinenumber=\"9\">You can use this to provide lower latency for Atom clients instead of client initiated polling. Instead of the client polling every say 5 seconds to get data from the feed the client would send up a request with <code>ES-LongPoll: 15</code>. This instructs the backend to wait for up to 15 seconds before returning with no result. The latency is therefore lowered from the poll interval to about 10ms from the time an event is written until the time the HTTP connection is notified.</p>\n<p sourcefile=\"http-api/optional-http-headers/longpoll.md\" sourcestartlinenumber=\"11\" sourceendlinenumber=\"11\">You can see the use of the <code>ES-LongPoll</code> header in the following cURL command.</p>\n<p sourcefile=\"http-api/optional-http-headers/longpoll.md\" sourcestartlinenumber=\"13\" sourceendlinenumber=\"13\">First go to the head of the stream (in this case we are using the default chat of the chat sample).</p>\n<div class=\"tabGroup\" id=\"tabgroup_yRctI9fN4R\" sourcefile=\"http-api/optional-http-headers/longpoll.md\" sourcestartlinenumber=\"15\" sourceendlinenumber=\"91\">\n<ul role=\"tablist\">\n<li role=\"presentation\">\n<a href=\"#tabpanel_yRctI9fN4R_tabid-1\" role=\"tab\" aria-controls=\"tabpanel_yRctI9fN4R_tabid-1\" data-tab=\"tabid-1\" tabindex=\"0\" aria-selected=\"true\" sourcefile=\"http-api/optional-http-headers/longpoll.md\" sourcestartlinenumber=\"15\" sourceendlinenumber=\"15\">Request</a>\n</li>\n<li role=\"presentation\">\n<a href=\"#tabpanel_yRctI9fN4R_tabid-2\" role=\"tab\" aria-controls=\"tabpanel_yRctI9fN4R_tabid-2\" data-tab=\"tabid-2\" tabindex=\"-1\" sourcefile=\"http-api/optional-http-headers/longpoll.md\" sourcestartlinenumber=\"21\" sourceendlinenumber=\"21\">Response</a>\n</li>\n</ul>\n<section id=\"tabpanel_yRctI9fN4R_tabid-1\" role=\"tabpanel\" data-tab=\"tabid-1\">\n<pre sourcefile=\"http-api/optional-http-headers/longpoll.md\" sourcestartlinenumber=\"17\" sourceendlinenumber=\"19\"><code class=\"lang-bash\">curl -i http://127.0.0.1:2113/streams/chat-GeneralChat -H &quot;Accept: application/json&quot;\n</code></pre></section>\n<section id=\"tabpanel_yRctI9fN4R_tabid-2\" role=\"tabpanel\" data-tab=\"tabid-2\" aria-hidden=\"true\" hidden=\"hidden\">\n<pre sourcefile=\"http-api/optional-http-headers/longpoll.md\" sourcestartlinenumber=\"23\" sourceendlinenumber=\"89\"><code class=\"lang-http\">HTTP/1.1 200 OK\nAccess-Control-Allow-Methods: POST, DELETE, GET, OPTIONS\nAccess-Control-Allow-Headers: Content-Type, X-Requested-With, X-PINGOTHER, Authorization, ES-LongPoll\nAccess-Control-Allow-Origin: *\nAccess-Control-Expose-Headers: Location, ES-Position\nCache-Control: max-age=0, no-cache, must-revalidate\nVary: Accept\nETag: &quot;0;-43840953&quot;\nContent-Type: application/json; charset=utf-8\nServer: Mono-HTTPAPI/1.0\nDate: Thu, 08 May 2014 10:12:27 GMT\nContent-Length: 1348\nKeep-Alive: timeout=15,max=100\n\n{\n  &quot;title&quot;: &quot;Event stream &#39;chat-GeneralChat&#39;&quot;,\n  &quot;id&quot;: &quot;http://127.0.0.1:2113/streams/chat-GeneralChat&quot;,\n  &quot;updated&quot;: &quot;2014-05-08T07:10:23.666463Z&quot;,\n  &quot;streamId&quot;: &quot;chat-GeneralChat&quot;,\n  &quot;author&quot;: {\n    &quot;name&quot;: &quot;EventStore&quot;\n  },\n  &quot;headOfStream&quot;: true,\n  &quot;selfUrl&quot;: &quot;http://127.0.0.1:2113/streams/chat-GeneralChat&quot;,\n  &quot;eTag&quot;: &quot;0;248368668&quot;,\n  &quot;links&quot;: [\n    {\n      &quot;uri&quot;: &quot;http://127.0.0.1:2113/streams/chat-GeneralChat&quot;,\n      &quot;relation&quot;: &quot;self&quot;\n    },\n    {\n      &quot;uri&quot;: &quot;http://127.0.0.1:2113/streams/chat-GeneralChat/head/backward/20&quot;,\n      &quot;relation&quot;: &quot;first&quot;\n    },\n    {\n      &quot;uri&quot;: &quot;http://127.0.0.1:2113/streams/chat-GeneralChat/1/forward/20&quot;,\n      &quot;relation&quot;: &quot;previous&quot;\n    },\n    {\n      &quot;uri&quot;: &quot;http://127.0.0.1:2113/streams/chat-GeneralChat/metadata&quot;,\n      &quot;relation&quot;: &quot;metadata&quot;\n    }\n  ],\n  &quot;entries&quot;: [\n    {\n      &quot;title&quot;: &quot;0@chat-GeneralChat&quot;,\n      &quot;id&quot;: &quot;http://127.0.0.1:2113/streams/chat-GeneralChat/0&quot;,\n      &quot;updated&quot;: &quot;2014-05-08T07:10:23.666463Z&quot;,\n      &quot;author&quot;: {\n        &quot;name&quot;: &quot;EventStore&quot;\n      },\n      &quot;summary&quot;: &quot;UserJoinedChat&quot;,\n      &quot;links&quot;: [\n        {\n          &quot;uri&quot;: &quot;http://127.0.0.1:2113/streams/chat-GeneralChat/0&quot;,\n          &quot;relation&quot;: &quot;edit&quot;\n        },\n        {\n          &quot;uri&quot;: &quot;http://127.0.0.1:2113/streams/chat-GeneralChat/0&quot;,\n          &quot;relation&quot;: &quot;alternate&quot;\n        }\n      ]\n    }\n  ]\n}\n</code></pre></section>\n</div>\n<p sourcefile=\"http-api/optional-http-headers/longpoll.md\" sourcestartlinenumber=\"93\" sourceendlinenumber=\"93\">Then grab the previous <code>rel</code> link <code>http://127.0.0.1:2113/streams/chat-GeneralChat/1/forward/20</code> and try it. It returns an empty feed.</p>\n<div class=\"tabGroup\" id=\"tabgroup_yRctI9fN4R-1\" sourcefile=\"http-api/optional-http-headers/longpoll.md\" sourcestartlinenumber=\"95\" sourceendlinenumber=\"153\">\n<ul role=\"tablist\">\n<li role=\"presentation\">\n<a href=\"#tabpanel_yRctI9fN4R-1_tabid-3\" role=\"tab\" aria-controls=\"tabpanel_yRctI9fN4R-1_tabid-3\" data-tab=\"tabid-3\" tabindex=\"0\" aria-selected=\"true\" sourcefile=\"http-api/optional-http-headers/longpoll.md\" sourcestartlinenumber=\"95\" sourceendlinenumber=\"95\">Request</a>\n</li>\n<li role=\"presentation\">\n<a href=\"#tabpanel_yRctI9fN4R-1_tabid-4\" role=\"tab\" aria-controls=\"tabpanel_yRctI9fN4R-1_tabid-4\" data-tab=\"tabid-4\" tabindex=\"-1\" sourcefile=\"http-api/optional-http-headers/longpoll.md\" sourcestartlinenumber=\"101\" sourceendlinenumber=\"101\">Response</a>\n</li>\n</ul>\n<section id=\"tabpanel_yRctI9fN4R-1_tabid-3\" role=\"tabpanel\" data-tab=\"tabid-3\">\n<pre sourcefile=\"http-api/optional-http-headers/longpoll.md\" sourcestartlinenumber=\"97\" sourceendlinenumber=\"99\"><code class=\"lang-bash\">curl -i http://127.0.0.1:2113/streams/chat-GeneralChat/1/forward/20 -H &quot;Accept: application/json&quot;\n</code></pre></section>\n<section id=\"tabpanel_yRctI9fN4R-1_tabid-4\" role=\"tabpanel\" data-tab=\"tabid-4\" aria-hidden=\"true\" hidden=\"hidden\">\n<pre sourcefile=\"http-api/optional-http-headers/longpoll.md\" sourcestartlinenumber=\"103\" sourceendlinenumber=\"151\"><code class=\"lang-http\">HTTP/1.1 200 OK\nAccess-Control-Allow-Methods: GET, OPTIONS\nAccess-Control-Allow-Headers: Content-Type, X-Requested-With, X-PINGOTHER, Authorization, ES-LongPoll\nAccess-Control-Allow-Origin: *\nAccess-Control-Expose-Headers: Location, ES-Position\nCache-Control: max-age=0, no-cache, must-revalidate\nVary: Accept\nETag: &quot;0;-43840953&quot;\nContent-Type: application/json; charset=utf-8\nServer: Mono-HTTPAPI/1.0\nDate: Thu, 08 May 2014 10:13:58 GMT\nContent-Length: 843\nKeep-Alive: timeout=15,max=100\n\n{\n  &quot;title&quot;: &quot;Event stream &#39;chat-GeneralChat&#39;&quot;,\n  &quot;id&quot;: &quot;http://127.0.0.1:2113/streams/chat-GeneralChat&quot;,\n  &quot;updated&quot;: &quot;0001-01-01T00:00:00Z&quot;,\n  &quot;streamId&quot;: &quot;chat-GeneralChat&quot;,\n  &quot;author&quot;: {\n    &quot;name&quot;: &quot;EventStore&quot;\n  },\n  &quot;headOfStream&quot;: false,\n  &quot;links&quot;: [\n    {\n      &quot;uri&quot;: &quot;http://127.0.0.1:2113/streams/chat-GeneralChat&quot;,\n      &quot;relation&quot;: &quot;self&quot;\n    },\n    {\n      &quot;uri&quot;: &quot;http://127.0.0.1:2113/streams/chat-GeneralChat/head/backward/20&quot;,\n      &quot;relation&quot;: &quot;first&quot;\n    },\n    {\n      &quot;uri&quot;: &quot;http://127.0.0.1:2113/streams/chat-GeneralChat/0/forward/20&quot;,\n      &quot;relation&quot;: &quot;last&quot;\n    },\n    {\n      &quot;uri&quot;: &quot;http://127.0.0.1:2113/streams/chat-GeneralChat/0/backward/20&quot;,\n      &quot;relation&quot;: &quot;next&quot;\n    },\n    {\n      &quot;uri&quot;: &quot;http://127.0.0.1:2113/streams/chat-GeneralChat/metadata&quot;,\n      &quot;relation&quot;: &quot;metadata&quot;\n    }\n  ],\n  &quot;entries&quot;: []\n}\n</code></pre></section>\n</div>\n<p sourcefile=\"http-api/optional-http-headers/longpoll.md\" sourcestartlinenumber=\"155\" sourceendlinenumber=\"155\">The entries section is empty (there is no further data that can be provided). Now try that URI with a long poll header.</p>\n<pre sourcefile=\"http-api/optional-http-headers/longpoll.md\" sourcestartlinenumber=\"157\" sourceendlinenumber=\"159\"><code class=\"lang-bash\">curl -i http://127.0.0.1:2113/streams/chat-GeneralChat/1/forward/20 -H &quot;Accept: application/json&quot; -H &quot;ES-LongPoll: 10&quot;\n</code></pre><p sourcefile=\"http-api/optional-http-headers/longpoll.md\" sourcestartlinenumber=\"161\" sourceendlinenumber=\"161\">If you do not insert any events into the stream while this is running it will take 10 seconds for the HTTP request to finish. If you append an event to the stream while its running you will see the result for that request when the event is appended.</p>\n","type":"Conceptual","source":{"remote":{"path":"http-api/optional-http-headers/longpoll.md","branch":"swagger-docfx","repo":"git@github.com:EventStore/docs.geteventstore.com.git"},"startLine":0,"endLine":0,"isExternal":false},"path":"http-api/optional-http-headers/longpoll.md","documentation":{"remote":{"path":"http-api/optional-http-headers/longpoll.md","branch":"swagger-docfx","repo":"git@github.com:EventStore/docs.geteventstore.com.git"},"startLine":0,"endLine":0,"isExternal":false},"_docfxVersion":"2.31.0.0","_systemKeys":["conceptual","type","source","path","documentation","title","rawTitle","wordCount"],"title":"Optional HTTP Headers: LongPoll","rawTitle":"<h1 id=\"optional-http-headers-longpoll\" sourcefile=\"http-api/optional-http-headers/longpoll.md\" sourcestartlinenumber=\"1\" sourceendlinenumber=\"1\">Optional HTTP Headers: LongPoll</h1>","wordCount":502,"_lang":"csharp","_tocPath":"docs/toc.html","_rel":"../../../","_path":"docs/http-api/optional-http-headers/longpoll.html","_key":"http-api/optional-http-headers/longpoll.md","_tocRel":"../../toc.html","_tocKey":"~/toc.md","__global":{"classesInSubtitle":"Classes","structsInSubtitle":"Structs","interfacesInSubtitle":"Interfaces","enumsInSubtitle":"Enums","delegatesInSubtitle":"Delegates","constructorsInSubtitle":"Constructors","fieldsInSubtitle":"Fields","propertiesInSubtitle":"Properties","methodsInSubtitle":"Methods","eventsInSubtitle":"Events","operatorsInSubtitle":"Operators","eiisInSubtitle":"Explicit Interface Implementations","functionsInSubtitle":"Functions","membersInSubtitle":"Members","improveThisDoc":"Improve this Doc","viewSource":"View Source","inheritance":"Inheritance","inheritedMembers":"Inherited Members","namespace":"Namespace","assembly":"Assembly","syntax":"Syntax","overrides":"Overrides","implements":"Implements","remarks":"Remarks","examples":"Examples","seealso":"See Also","declaration":"Declaration","parameters":"Parameters","typeParameters":"Type Parameters","type":"Type","name":"Name","description":"Description","returns":"Returns","fieldValue":"Field Value","propertyValue":"Property Value","eventType":"Event Type","exceptions":"Exceptions","condition":"Condition","extensionMethods":"Extension Methods","note":"<h5>Note</h5>","warning":"<h5>Warning</h5>","tip":"<h5>Tip</h5>","important":"<h5>Important</h5>","caution":"<h5>Caution</h5>","_shared":{}}}